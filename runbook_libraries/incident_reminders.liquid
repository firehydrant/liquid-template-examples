{% comment %}
Description: Reminder copy for communication, archive events, retrospective reminder, and RCA reminders. Target these messages to be sent at the ideal time via triggers and to the channel or email distro that responders or stakeholders may need to see them.

Recommended Runbook Steps: Notify channel with a custom message, Notify incident channel with a custom message, or Send an email notification

Conditions to Trigger: 'Current Milestone is n' or any 'Time since...'  triggers

Note: This is written in mrkdwn (slack markdown formatting) and is optimized for use in a slack messages.
{% endcomment %}

# During an Incident
## Responder Communication Reminder Notification, proactive - Recommendation: every 25 minutes for severe incidents. This could be set as a 'reactive' message by checking a 'time since last update' condition  << Todo if such a field exists.
    {{incident.name}}-{{ incident.severity}} in milestone ({{incident.current_milestone}}) has been running for [duration].
        {% comment %}
        Todo:
        The ideal would be to say something like '<role title> - @<responder slack name>'
        {% endcomment %}
    * @{{ incident.role_assignments[0].user.name }} Please post an update in the _next 10 minutes_ using ```/fh update``` to the incident status page.*
    {{incident.severity}} incidents require an update to our internal status page every 30 minutes until the 'mititgated' milestone is reached.
    <https://placeholder_incident_docs| See our standards for communication for {{incident.severity}} incidents for details and templates.>

        {% comment %}
        Todo:
        *Figure out time duration
        * Todo Question: Can we return details of a runbook step? For example, could we make visible the 'repeats' time value.
        * What is the mrkdwn syntax for an incline code block, update the /fh commands above ^^
        * Consider creating a custom fh command to return a 'template' of an update that a responder could copy paste.
        {% endcomment %}

## Stakeholder Organization Notification (Support or leadership) - recomendation: Every hour, could also be leveraged via an email step.

    Reminder: {{incident.name}}-{{ incident.severity}} in milestone ({{incident.current_milestone}}) has been running for [duration].

    See the <{{incident.private_status_page_url}}|incident status page> for the latest updates on impact.
    Initial Impact: {{incident.customer_impact_summary}}
    Latest update: {{incident.last_note.created_at | date: "%Y-%m-%d %H:%M" }} - {{incident.last_note.body}}

# After an Incident

## Retrospective reminder - sent to incident channel

    @incident_commander - it's been x hours since the incident was resolved. Please scheudle a retrospective using the following <guide-link></guide-link>

    OR

    @incident_commander - it's been x hours since the incident was resolved. Please scheudle a retrospective following the <retrospective check list>

## Archive Reminder - sent to incident channel

    This channel will be archived in 24 hours. @<incident commander> are there any additional tasks required before this happens? See <task list link>?

    {%- comment -%}
    * todo Question: Do we have access to task lists in template variables? Can we assign tasks lists via runbook steps? (see above step for use case).
    {%- endcomment -%}}

## RCA reminder - sent after retrospective complete to the main incident channel, product operations/corporate commuincations/legal team channels.

    Incident {{incident.name}}-{{ incident.severity}}'s has completed it's post incident review. See <correct FH URL?>/{{incident.report_id}} <<

    Note: For {{incident.severity}} our <https://link-to-SLA-source-of-truth | SLA> is 48 hours.